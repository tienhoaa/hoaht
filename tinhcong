<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Toán Thông Số Đường Cong</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #2c3e50;
            text-align: center;
        }
        .formula {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: inline-block;
            width: 200px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        input {
            padding: 8px;
            width: 120px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .angle-input {
            display: flex;
            align-items: center;
        }
        .angle-input input {
            width: 60px;
            margin-right: 5px;
        }
        .angle-input span {
            margin-right: 10px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            display: block;
            width: 100%;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background-color: #e9f7ef;
            border-radius: 4px;
            display: none;
        }
        .result h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .note {
            font-size: 0.9em;
            color: #666;
            margin-top: 20px;
            padding: 10px;
            background-color: #f8f8f8;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>THIẾT KẾ TUYẾN TRÊN BÌNH ĐỒ</h1>
        
        <div class="formula">
            <p><strong>Phân cự:</strong> \( P = R \left( \frac{1}{\cos \frac{\alpha}{2}} - 1 \right) \)</p>
            <p><strong>Chiều dài tiếp tuyến:</strong> \( T = R \cdot \tan \frac{\alpha}{2} \)</p>
            <p><strong>Chiều dài đường cong:</strong> \( K = \frac{\pi R \alpha}{180} \)</p>
            <p><strong>Thông số Clotoit:</strong> \( A = \sqrt{R \cdot L_{ct}} \)</p>
            <p><strong>Góc kẹp:</strong> \( \varphi_0 = \frac{L_{ct}}{2R} \) (với \( \alpha \geq 2\varphi_0 \))</p>
        </div>
        
        <h2>Tính Toán Thông Số Đường Cong</h2>
        
        <div class="input-group">
            <label for="radius">Bán kính R (m):</label>
            <input type="number" id="radius" step="0.01" value="100">
        </div>
        
        <div class="input-group">
            <label>Góc α:</label>
            <div class="angle-input">
                <input type="number" id="degrees" value="30" min="0" max="360">°
                <input type="number" id="minutes" value="0" min="0" max="59">'
                <input type="number" id="seconds" value="0" min="0" max="59">"
            </div>
        </div>
        
        <div class="input-group">
            <label for="lct">Chiều dài Clotoit L<sub>ct</sub> (m):</label>
            <input type="number" id="lct" step="0.01" value="50">
        </div>
        
        <button onclick="calculate()">Tính Toán</button>
        
        <div id="result" class="result">
            <h3>Kết Quả Tính Toán</h3>
            <table>
                <tr>
                    <th>Thông số</th>
                    <th>Giá trị</th>
                    <th>Đơn vị</th>
                </tr>
                <tr>
                    <td>Góc α</td>
                    <td id="alphaDeg"></td>
                    <td>độ</td>
                </tr>
                <tr>
                    <td>Phân cự P</td>
                    <td id="polar"></td>
                    <td>m</td>
                </tr>
                <tr>
                    <td>Chiều dài tiếp tuyến T</td>
                    <td id="tangent"></td>
                    <td>m</td>
                </tr>
                <tr>
                    <td>Chiều dài đường cong K</td>
                    <td id="curveLength"></td>
                    <td>m</td>
                </tr>
                <tr>
                    <td>Thông số Clotoit A</td>
                    <td id="clothoidParam"></td>
                    <td>m</td>
                </tr>
                <tr>
                    <td>Góc kẹp φ<sub>0</sub></td>
                    <td id="phi0"></td>
                    <td>radian</td>
                </tr>
            </table>
        </div>
        
        <div class="note">
            <p><strong>Hướng dẫn sử dụng:</strong></p>
            <ol>
                <li>Nhập bán kính đường cong R (mét)</li>
                <li>Nhập góc α (độ, phút, giây)</li>
                <li>Nhập chiều dài đoạn Clotoit L<sub>ct</sub> (mét)</li>
                <li>Nhấn nút "Tính Toán" để xem kết quả</li>
            </ol>
            <p><strong>Giải thích thông số:</strong></p>
            <ul>
                <li><strong>Phân cự P:</strong> Khoảng cách từ đỉnh góc đến điểm giữa đường cong</li>
                <li><strong>Tiếp tuyến T:</strong> Chiều dài đoạn thẳng từ điểm đầu/cuối đường cong đến đỉnh góc</li>
                <li><strong>Đường cong K:</strong> Chiều dài thực tế của đoạn đường cong</li>
                <li><strong>Thông số Clotoit A:</strong> Thông số đặc trưng của đường cong chuyển tiếp</li>
                <li><strong>Góc kẹp φ<sub>0</sub>:</strong> Góc tạo bởi đoạn Clotoit</li>
            </ul>
        </div>
    </div>

    <script>
        function calculate() {
            // Lấy giá trị đầu vào
            const R = parseFloat(document.getElementById('radius').value);
            const degrees = parseFloat(document.getElementById('degrees').value);
            const minutes = parseFloat(document.getElementById('minutes').value);
            const seconds = parseFloat(document.getElementById('seconds').value);
            const Lct = parseFloat(document.getElementById('lct').value);
            
            // Kiểm tra giá trị nhập vào
            if (isNaN(R) || R <= 0) {
                alert("Bán kính R phải là số dương");
                return;
            }
            
            if (degrees < 0 || degrees > 360 || minutes < 0 || minutes > 59 || seconds < 0 || seconds > 59) {
                alert("Vui lòng nhập góc hợp lệ (độ: 0-360, phút/giây: 0-59)");
                return;
            }
            
            if (isNaN(Lct) || Lct < 0) {
                alert("Chiều dài Clotoit phải là số không âm");
                return;
            }
            
            // Tính toán
            const decimalDegrees = degrees + minutes/60 + seconds/3600;
            const alphaRad = decimalDegrees * Math.PI / 180;
            const alphaDeg = decimalDegrees;
            
            // Các công thức tính toán
            const P = R * (1/Math.cos(alphaRad/2) - 1);
            const T = R * Math.tan(alphaRad/2);
            const K = Math.PI * R * alphaDeg / 180;
            const A = Math.sqrt(R * Lct);
            const phi0 = Lct / (2 * R);
            
            // Hiển thị kết quả
            document.getElementById('alphaDeg').textContent = alphaDeg.toFixed(4);
            document.getElementById('polar').textContent = P.toFixed(4);
            document.getElementById('tangent').textContent = T.toFixed(4);
            document.getElementById('curveLength').textContent = K.toFixed(4);
            document.getElementById('clothoidParam').textContent = A.toFixed(4);
            document.getElementById('phi0').textContent = phi0.toFixed(6);
            
            // Kiểm tra điều kiện α ≥ 2φ0
            if (alphaRad < 2*phi0) {
                alert("Lưu ý: Góc α (" + alphaDeg.toFixed(2) + "°) nhỏ hơn 2φ₀ (" + (2*phi0*180/Math.PI).toFixed(2) + "°). Kết quả có thể không chính xác!");
            }
            
            document.getElementById('result').style.display = 'block';
        }
    </script>
</body>
</html>
